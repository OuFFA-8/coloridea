<aside
  class="w-64 h-screen flex flex-col border-e transition-colors duration-500 relative overflow-hidden bg-[#111827] border-[#444547]/30 text-gray-400"
  [class.ci-sidebar-slide]="animated"
>
  <!-- Top accent line -->
  <div
    class="absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-[#fa8728] via-[#f97316] to-transparent"
  ></div>

  <!-- Logo -->
  <div class="px-6 py-6">
    <img
      [src]="isDark ? '/images/logo-10.png' : '/images/logo-9.png'"
      alt="ColorIdea"
      class="h-8 w-auto object-contain"
    />
  </div>

  <div class="mx-5 h-px bg-[#444547]/20 mb-3"></div>

  <p
    class="px-6 text-[8px] font-black uppercase tracking-[0.3em] text-gray-700 mb-2"
    style="font-family: 'Alexandria', sans-serif"
  >
    {{ 'SIDEBAR.NAVIGATION' | translate }}
  </p>

  <!-- Nav -->
  <nav class="flex-1 px-3 space-y-0.5">
    @if (projectId) {
      @for (link of projectLinks; track link.label) {
        <a
          [routerLink]="link.path"
          [routerLinkActiveOptions]="link.exact"
          routerLinkActive="ci-nav-active"
          class="ci-nav-item group flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold no-underline transition-all duration-250 text-gray-400 hover:text-[#fa8728] hover:bg-[#fa8728]/6"
        >
          <span
            class="ci-nav-icon w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors duration-250 bg-[#444547]/15 group-hover:bg-[#fa8728]/15"
          >
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              @if (link.icon === 'overview') {
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"
                />
              }
              @if (link.icon === 'deliverables') {
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"
                />
                <polyline
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  points="3.27 6.96 12 12.01 20.73 6.96"
                />
                <line stroke-linecap="round" stroke-width="2" x1="12" y1="22.08" x2="12" y2="12" />
              }
              @if (link.icon === 'financials') {
                <line stroke-linecap="round" stroke-width="2" x1="12" y1="1" x2="12" y2="23" />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"
                />
              }
            </svg>
          </span>
          {{ link.label | translate }}
        </a>
      }
      <div class="h-px my-2 mx-2 bg-[#444547]/20"></div>
    }

    <!-- My Projects -->
    <a
      routerLink="/select-project"
      routerLinkActive="ci-nav-active"
      class="ci-nav-item group flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold no-underline transition-all duration-250 text-gray-400 hover:text-[#fa8728] hover:bg-[#fa8728]/6"
    >
      <span
        class="ci-nav-icon w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors duration-250 bg-[#444547]/15 group-hover:bg-[#fa8728]/15"
      >
        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 7a2 2 0 012-2h4l2 2h8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"
          />
        </svg>
      </span>
      {{ 'SIDEBAR.MY_PROJECTS' | translate }}
    </a>

    <!-- Profile -->
    <a
      routerLink="/client/profile"
      routerLinkActive="ci-nav-active"
      class="ci-nav-item group flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold no-underline transition-all duration-250 text-gray-400 hover:text-[#fa8728] hover:bg-[#fa8728]/6"
    >
      <span
        class="ci-nav-icon w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors duration-250 bg-[#444547]/15 group-hover:bg-[#fa8728]/15"
      >
        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"
          />
          <circle
            cx="12"
            cy="7"
            r="4"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          />
        </svg>
      </span>
      {{ 'NAV.PROFILE' | translate }}
    </a>
  </nav>

  <!-- Pattern image -->
  @if (pattern) {
    <div
      class="mx-3 mb-3 rounded-2xl overflow-hidden border border-[#444547]/20"
      style="height: 120px"
    >
      <img [src]="pattern" alt="pattern" class="w-full h-full object-cover opacity-70" />
    </div>
  }

  <!-- Current Project + Logout -->
  <div class="p-3 border-t border-[#444547]/20">
    @if (projectName) {
      <div
        class="flex items-center gap-3 px-3 py-2.5 rounded-xl mb-2 hover:bg-[#fa8728]/5 transition-colors duration-300 cursor-default"
      >
        <div
          class="w-9 h-9 rounded-xl flex-shrink-0 bg-[#fa8728]/15 border border-[#fa8728]/20 flex items-center justify-center"
        >
          <svg class="w-4 h-4 text-[#fa8728]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
            />
          </svg>
        </div>
        <div class="flex flex-col min-w-0">
          <span
            class="text-[8px] font-black uppercase tracking-[0.25em] text-[#fa8728]/70"
            style="font-family: 'Alexandria', sans-serif"
          >
            {{ 'SIDEBAR.CURRENT_PROJECT' | translate }}
          </span>
          <span
            class="text-xs font-black text-[#fa8728] truncate"
            style="font-family: 'Alexandria', sans-serif"
            >{{ projectName }}</span
          >
        </div>
      </div>
    }

    <button
      (click)="logout()"
      class="w-full flex items-center gap-3 px-3 py-2.5 rounded-xl cursor-pointer text-sm font-black text-rose-400 border-none bg-transparent transition-all duration-300 hover:bg-rose-500/10 hover:text-rose-400"
    >
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
        />
      </svg>
      {{ 'NAV.LOGOUT' | translate }}
    </button>
  </div>
</aside>
