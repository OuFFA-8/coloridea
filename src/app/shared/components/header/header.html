<header
  class="h-16 flex items-center justify-between px-6 sticky top-0 z-50 backdrop-blur-md transition-colors duration-300 bg-[#fff1e6]/90 border-b border-[#e6d5c3] dark:bg-[#0e0e0e]/90 dark:border-[#444547]/30 ci-header-slide"
>
  <!-- Left: Live badge only (no logo â€” sidebar handles branding) -->
  <div class="flex items-center gap-3">
    <div
      class="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-[#68ab1f]/10 border border-[#68ab1f]/20"
    >
      <span class="w-1.5 h-1.5 rounded-full bg-[#68ab1f] animate-pulse"></span>
      <span class="text-[9px] font-black text-[#68ab1f] uppercase tracking-widest">Live</span>
    </div>
  </div>

  <!-- Right: Controls + User -->
  <div class="flex items-center gap-3 md:gap-5">
    <!-- Lang + Theme + Bell -->
    <div
      class="flex items-center gap-2 border-e border-[#e6d5c3] dark:border-[#444547]/30 pe-4 md:pe-5"
    >
      <!-- Language -->
      <button
        (click)="toggleLanguage()"
        class="text-[10px] font-black w-9 h-9 flex items-center justify-center rounded-xl cursor-pointer transition-all duration-300 bg-white dark:bg-[#1c1c1c] border border-[#e6d5c3] dark:border-[#444547]/40 text-[#444547] dark:text-gray-400 hover:border-[#fa8728] hover:text-[#fa8728]"
      >
        {{ myTrans.currentLang === 'en' ? 'AR' : 'EN' }}
      </button>

      <!-- Theme -->
      <button
        (click)="themeService.toggleTheme()"
        class="w-9 h-9 flex items-center justify-center rounded-xl cursor-pointer transition-all duration-300 bg-white dark:bg-[#1c1c1c] border border-[#e6d5c3] dark:border-[#444547]/40 text-[#444547] dark:text-gray-400 hover:border-[#fa8728] hover:text-[#fa8728]"
      >
        <svg
          *ngIf="themeService.isDarkMode()"
          class="w-4 h-4 text-[#fa8728]"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M17.657 17.657l-.707-.707M6.343 6.343l-.707-.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
          />
        </svg>
        <svg
          *ngIf="!themeService.isDarkMode()"
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
          />
        </svg>
      </button>

      <!-- Bell -->
      <button
        class="hidden sm:flex w-9 h-9 items-center justify-center rounded-xl cursor-pointer transition-all duration-300 bg-white dark:bg-[#1c1c1c] border border-[#e6d5c3] dark:border-[#444547]/40 text-[#5c5f63] dark:text-gray-400 hover:border-[#fa8728] hover:text-[#fa8728]"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
          />
        </svg>
      </button>
    </div>

    <!-- User -->
    <div class="relative">
      <button
        (click)="toggleDropdown()"
        class="flex items-center gap-3 group border-none bg-transparent cursor-pointer"
      >
        <div class="text-right hidden sm:block">
          <p
            class="text-sm font-black leading-none mb-0.5 text-[#444547] dark:text-white"
            style="font-family: 'Lexend', sans-serif"
          >
            {{ user?.name || 'Admin' }}
          </p>
          <p
            class="text-[9px] font-black text-[#fa8728] uppercase tracking-widest"
            style="font-family: 'Alexandria', sans-serif"
          >
            {{
              user?.role === 'admin'
                ? ('SIDEBAR.SUPER_ADMIN' | translate)
                : ('SIDEBAR.MEMBER' | translate)
            }}
          </p>
        </div>
        <div class="relative">
          <div
            class="w-10 h-10 rounded-xl overflow-hidden flex items-center justify-center border-2 border-[#fa8728]/30 group-hover:border-[#fa8728] transition-all duration-300 bg-gradient-to-tr from-[#fa8728] to-[#f97316] shadow-lg shadow-[#fa8728]/20"
          >
            @if (user?.photo) {
              <img
                [src]="getPhotoUrl(user.photo)"
                [alt]="user.name"
                class="w-full h-full object-cover"
                (error)="$any($event.target).style.display = 'none'"
              />
            } @else {
              <span class="text-white font-black text-sm">{{ user?.name?.charAt(0) || 'A' }}</span>
            }
          </div>
          <span
            class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-[#68ab1f] border-2 border-[#fff1e6] dark:border-[#0e0e0e] rounded-full"
          ></span>
        </div>
      </button>

      <!-- Dropdown -->
      @if (dropdownOpen) {
        <div
          class="absolute end-0 mt-3 w-64 origin-top-end rounded-2xl shadow-2xl shadow-[#444547]/15 z-50 border border-[#e6d5c3] dark:border-[#444547]/30 bg-white dark:bg-[#1c1c1c] ci-dropdown-enter"
        >
          <!-- User info -->
          <div class="px-4 py-3.5 border-b border-[#e6d5c3] dark:border-[#444547]/20">
            <div class="flex items-center gap-3">
              <div
                class="w-10 h-10 rounded-xl overflow-hidden flex-shrink-0 border border-[#fa8728]/20 bg-gradient-to-tr from-[#fa8728] to-[#f97316] flex items-center justify-center"
              >
                @if (user?.photo) {
                  <img
                    [src]="getPhotoUrl(user.photo)"
                    [alt]="user?.name"
                    class="w-full h-full object-cover"
                    (error)="$any($event.target).style.display = 'none'"
                  />
                } @else {
                  <span class="text-white font-black text-sm">{{
                    user?.name?.charAt(0) || 'A'
                  }}</span>
                }
              </div>
              <div class="min-w-0">
                <p
                  class="text-xs font-black text-[#444547] dark:text-white truncate"
                  style="font-family: 'Lexend', sans-serif"
                >
                  {{ user?.name }}
                </p>
                <p class="text-[9px] text-[#5c5f63]/50 dark:text-gray-500 truncate">
                  {{ user?.email }}
                </p>
              </div>
            </div>
          </div>

          <div class="p-2">
            <a
              routerLink="/admin/profile"
              (click)="dropdownOpen = false"
              class="flex items-center gap-3 px-3 py-2.5 rounded-xl no-underline text-sm font-bold text-[#444547] dark:text-gray-300 hover:bg-[#fa8728]/8 hover:text-[#fa8728] transition-all duration-200"
            >
              <svg class="w-4 h-4 opacity-60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                />
              </svg>
              {{ 'NAV.PROFILE' | translate }}
            </a>
          </div>

          <div class="p-2 border-t border-[#e6d5c3] dark:border-[#444547]/20">
            <button
              (click)="logout()"
              class="w-full flex items-center gap-3 px-3 py-2.5 rounded-xl cursor-pointer text-sm font-black text-rose-500 border-none bg-transparent transition-all duration-200 hover:bg-rose-50 dark:hover:bg-rose-500/10"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                />
              </svg>
              {{ 'NAV.LOGOUT' | translate }}
            </button>
          </div>
        </div>
        <div class="fixed inset-0 z-[-1]" (click)="dropdownOpen = false"></div>
      }
    </div>
  </div>
</header>
