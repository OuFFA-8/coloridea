<div class="p-8 min-h-screen bg-slate-50 dark:bg-[#0b0f1a] transition-colors duration-500">
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-12">
    <div>
      <h1 class="text-3xl font-black text-slate-900 dark:text-white tracking-tight">
        Clients Directory
      </h1>
      <p class="text-sm text-slate-400 dark:text-gray-500 font-bold uppercase tracking-widest mt-1">
        Partners Management
      </p>
    </div>
    <button
      (click)="toggleModal()"
      class="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all shadow-xl shadow-blue-500/20 active:scale-95 cursor-pointer"
    >
      + Register New Client
    </button>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    @for (client of clients; track client.id) {
      <div
        (click)="openClient(client.id)"
        class="group relative bg-white dark:bg-[#111827] rounded-[2.5rem] border border-slate-100 dark:border-gray-800 p-8 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 cursor-pointer overflow-hidden"
      >
        <div
          [style.backgroundImage]="'url(' + client.patternId + ')'"
          class="absolute top-0 right-0 w-full h-1.5 opacity-40 bg-cover bg-center group-hover:h-3 transition-all duration-700"
        ></div>

        <div class="flex items-start justify-between mb-6">
          <div
            class="w-16 h-16 rounded-2xl bg-slate-50 dark:bg-gray-800 p-3 border border-slate-100 dark:border-gray-700 shadow-sm overflow-hidden"
          >
            <img [src]="client.logoUrl" class="w-full h-full object-contain" />
          </div>
          <span
            class="px-4 py-1.5 rounded-xl text-[9px] font-black bg-slate-50 dark:bg-gray-800 text-slate-400 group-hover:text-blue-600 transition-colors uppercase tracking-widest"
          >
            {{ client.projectsCount || 0 }} Projects
          </span>
        </div>

        <h3 class="text-2xl font-black text-slate-900 dark:text-white tracking-tight">
          {{ client.nameEn }}
        </h3>
        <p class="text-lg font-bold text-slate-400 mt-1" dir="rtl">{{ client.nameAr }}</p>

        <div
          class="mt-8 pt-6 border-t border-slate-50 dark:border-gray-800 flex items-center justify-between"
        >
          <span class="text-[10px] font-bold text-slate-300 lowercase tracking-wider">{{
            client.email
          }}</span>
          <div
            class="w-10 h-10 rounded-full bg-slate-50 dark:bg-gray-800 flex items-center justify-center text-slate-400 group-hover:bg-blue-600 group-hover:text-white transition-all"
          >
            ‚Üí
          </div>
        </div>
      </div>
    }
  </div>

  @if (showModal) {
    <div class="fixed inset-0 z-[100] flex items-center justify-center p-6">
      <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-md" (click)="toggleModal()"></div>

      <div
        class="relative w-full max-w-2xl bg-white dark:bg-[#111827] rounded-[3rem] p-12 shadow-2xl border border-slate-200 dark:border-gray-800"
      >
        <h2 class="text-3xl font-black text-slate-900 dark:text-white mb-8 tracking-tight">
          Add New Partner
        </h2>

        <form [formGroup]="clientForm" (ngSubmit)="saveClient()" class="space-y-6">
          <div class="grid grid-cols-2 gap-6">
            <div class="space-y-2">
              <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1"
                >Name (EN)</label
              >
              <input
                formControlName="nameEn"
                type="text"
                class="w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-gray-950 border border-slate-100 dark:border-gray-800 outline-none font-bold text-sm"
              />
            </div>
            <div class="space-y-2 text-right">
              <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest mr-1"
                >ÿßŸÑÿßÿ≥ŸÖ (ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä)</label
              >
              <input
                formControlName="nameAr"
                type="text"
                dir="rtl"
                class="w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-gray-950 border border-slate-100 dark:border-gray-800 outline-none font-bold text-sm"
              />
            </div>
          </div>

          <div class="grid grid-cols-2 gap-6">
            <div class="space-y-2">
              <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1"
                >Email</label
              >
              <input
                formControlName="email"
                type="email"
                class="w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-gray-950 border border-slate-100 dark:border-gray-800 outline-none font-bold text-sm"
              />
            </div>
            <div class="space-y-2">
              <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1"
                >Password</label
              >
              <input
                formControlName="password"
                type="password"
                class="w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-gray-950 border border-slate-100 dark:border-gray-800 outline-none font-bold text-sm"
              />
            </div>
          </div>

          <div class="grid grid-cols-2 gap-6">
            <div class="space-y-2">
              <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1"
                >Company Logo</label
              >
              <div
                class="relative h-32 rounded-3xl border-2 border-dashed border-slate-200 dark:border-gray-800 flex items-center justify-center overflow-hidden hover:border-blue-500 transition-colors group bg-slate-50 dark:bg-gray-950"
              >
                @if (logoPreview) {
                  <img [src]="logoPreview" class="h-full w-full object-contain p-4" />
                } @else {
                  <div class="text-center opacity-40 group-hover:opacity-100 transition-opacity">
                    <span class="text-2xl">üñºÔ∏è</span>
                    <p class="text-[8px] font-black uppercase mt-1">Upload Logo</p>
                  </div>
                }
                <input
                  type="file"
                  (change)="onFileSelected($event, 'logo')"
                  class="absolute inset-0 opacity-0 cursor-pointer"
                  accept="image/*"
                />
              </div>
            </div>

            <div class="space-y-2">
              <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1"
                >Visual Pattern (Image)</label
              >
              <div
                class="relative h-32 rounded-3xl border-2 border-dashed border-slate-200 dark:border-gray-800 flex items-center justify-center overflow-hidden hover:border-blue-500 transition-colors group bg-slate-50 dark:bg-gray-950"
              >
                @if (patternPreview) {
                  <img [src]="patternPreview" class="h-full w-full object-cover" />
                } @else {
                  <div class="text-center opacity-40 group-hover:opacity-100 transition-opacity">
                    <span class="text-2xl">üé®</span>
                    <p class="text-[8px] font-black uppercase mt-1">Upload Pattern</p>
                  </div>
                }
                <input
                  type="file"
                  (change)="onFileSelected($event, 'pattern')"
                  class="absolute inset-0 opacity-0 cursor-pointer"
                  accept="image/*"
                />
              </div>
            </div>
          </div>

          <div class="flex gap-4 pt-6">
            <button
              type="button"
              (click)="toggleModal()"
              class="flex-1 py-5 rounded-2xl text-[10px] font-black uppercase text-slate-400 bg-slate-50 dark:bg-gray-800/50 cursor-pointer"
            >
              Cancel
            </button>
            <button
              type="submit"
              [disabled]="clientForm.invalid || !logoPreview || !patternPreview"
              class="flex-1 py-5 rounded-2xl text-[10px] font-black uppercase text-white bg-blue-600 shadow-xl shadow-blue-500/20 cursor-pointer disabled:opacity-50"
            >
              Register Partner
            </button>
          </div>
        </form>
      </div>
    </div>
  }
</div>
