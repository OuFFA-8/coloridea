<div class="p-8 min-h-screen transition-colors duration-500 bg-[#fff1e6] dark:bg-[#0e0e0e]">
  <!-- ===== HEADER ===== -->
  <div
    class="flex flex-col md:flex-row md:items-center justify-between gap-4 border-b pb-8 border-[#e6d5c3] dark:border-[#444547]/30 mb-8 ci-section"
    style="--delay: 0s"
  >
    <div>
      <h1
        class="text-3xl font-black tracking-tight text-[#444547] dark:text-white"
        style="font-family: 'Lexend', sans-serif"
      >
        {{ 'ADMIN.PROJECTS.TITLE' | translate }}
      </h1>
      <p
        class="text-[9px] font-black uppercase tracking-widest text-[#5c5f63]/50 dark:text-gray-500 mt-1"
        style="font-family: 'Alexandria', sans-serif"
      >
        {{ filteredProjects.length }} {{ 'ADMIN.PROJECTS.PROJECTS_COUNT' | translate }}
      </p>
    </div>

    <!-- Filter buttons -->
    <div class="flex gap-2">
      @for (status of ['all', 'active', 'completed', 'pending']; track status) {
        <button
          (click)="filterByStatus(status)"
          class="px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all duration-300 border-none cursor-pointer"
          [class.bg-[#fa8728]]="selectedStatus === status"
          [class.text-white]="selectedStatus === status"
          [class.shadow-md]="selectedStatus === status"
          [class.shadow-[#fa8728]/25]="selectedStatus === status"
          [class.bg-white]="selectedStatus !== status"
          [class.dark:bg-[#1c1c1c]]="selectedStatus !== status"
          [class.text-[#5c5f63]/50]="selectedStatus !== status"
          [class.dark:text-gray-500]="selectedStatus !== status"
          [class.hover:text-[#fa8728]]="selectedStatus !== status"
        >
          {{
            status === 'all'
              ? ('COMMON.ALL' | translate)
              : ('STATUS.' + status.toUpperCase() | translate)
          }}
        </button>
      }
    </div>
  </div>

  <!-- ===== SKELETON ===== -->
  @if (isLoading) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      @for (item of [1, 2, 3, 4, 5, 6]; track item) {
        <div
          class="bg-white dark:bg-[#1c1c1c] rounded-2xl border border-[#e6d5c3] dark:border-[#444547]/30 p-6 animate-pulse"
        >
          <div class="flex justify-between mb-6">
            <div class="w-20 h-6 rounded-lg bg-[#e6d5c3] dark:bg-[#444547]/30"></div>
            <div class="w-6 h-6 rounded bg-[#e6d5c3] dark:bg-[#444547]/30"></div>
          </div>
          <div class="h-6 w-40 bg-[#e6d5c3] dark:bg-[#444547]/30 rounded-full mb-2"></div>
          <div class="h-4 w-24 bg-[#e6d5c3]/60 dark:bg-[#444547]/20 rounded-full mb-8"></div>
          <div class="h-1.5 w-full bg-[#e6d5c3]/60 dark:bg-[#444547]/20 rounded-full"></div>
        </div>
      }
    </div>
  }

  <!-- ===== EMPTY ===== -->
  @if (!isLoading && filteredProjects.length === 0) {
    <div
      class="py-32 text-center border-2 border-dashed rounded-3xl border-[#e6d5c3] dark:border-[#444547]/30 ci-section"
      style="--delay: 0.1s"
    >
      <div class="text-4xl mb-4 opacity-20">ðŸ“‚</div>
      <p class="text-sm font-black uppercase tracking-widest text-[#5c5f63]/30 dark:text-gray-700">
        {{ 'ADMIN.PROJECTS.NO_PROJECTS' | translate }}
      </p>
    </div>
  }

  <!-- ===== GRID ===== -->
  @if (!isLoading && filteredProjects.length > 0) {
    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 ci-section"
      style="--delay: 0.06s"
    >
      @for (project of filteredProjects; track project._id) {
        <div
          (click)="openDetails(project._id)"
          class="ci-card group relative rounded-2xl border p-6 flex flex-col overflow-hidden shadow-sm cursor-pointer bg-white dark:bg-[#1c1c1c] border-[#e6d5c3] dark:border-[#444547]/30"
        >
          <!-- Project Photo -->
          @if (project.photo) {
            <div class="w-full h-36 rounded-xl overflow-hidden mb-5">
              <img
                [src]="getPhotoUrl(project.photo)"
                [alt]="project.name"
                class="ci-card-img w-full h-full object-cover"
                (error)="$any($event.target).style.display = 'none'"
              />
            </div>
          }

          <!-- Delete -->
          <button
            (click)="deleteProject($event, project._id, project.name)"
            class="absolute top-4 right-4 w-8 h-8 rounded-xl flex items-center justify-center text-xs border-none cursor-pointer z-10 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-[#e6d5c3]/60 dark:bg-[#444547]/30 text-[#5c5f63] hover:bg-rose-50 dark:hover:bg-rose-500/10 hover:text-rose-500"
          >
            âœ•
          </button>

          <!-- Status -->
          <div class="flex justify-between items-start mb-4">
            <span
              class="px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border transition-colors duration-300"
              [class.bg-[#fa8728]/10]="project.status === 'active'"
              [class.text-[#fa8728]]="project.status === 'active'"
              [class.border-[#fa8728]/20]="project.status === 'active'"
              [class.bg-[#68ab1f]/10]="project.status === 'completed'"
              [class.text-[#68ab1f]]="project.status === 'completed'"
              [class.border-[#68ab1f]/20]="project.status === 'completed'"
              [class.bg-[#e6d5c3]/50]="project.status === 'pending' || !project.status"
              [class.text-[#5c5f63]/50]="project.status === 'pending' || !project.status"
              [class.border-[#e6d5c3]]="project.status === 'pending' || !project.status"
              [class.dark:bg-[#444547]/20]="project.status === 'pending' || !project.status"
              [class.dark:border-[#444547]/30]="project.status === 'pending' || !project.status"
            >
              {{ 'STATUS.' + (project.status?.toUpperCase() || 'PENDING') | translate }}
            </span>
          </div>

          <!-- Name & Client -->
          <div class="mb-6 flex-1">
            <h3
              class="text-xl font-black tracking-tight mb-1 transition-colors duration-300 text-[#444547] dark:text-white group-hover:text-[#fa8728]"
              style="font-family: 'Lexend', sans-serif"
            >
              {{ project.name }}
            </h3>
            <p
              class="text-[10px] font-black uppercase tracking-wider text-[#5c5f63]/40 dark:text-gray-600"
              style="font-family: 'Alexandria', sans-serif"
            >
              {{ project.user?.name || ('ADMIN.PROJECTS.NO_CLIENT' | translate) }}
            </p>
          </div>

          <!-- Explore button -->
          <button
            class="ci-explore-btn w-full py-3 text-[9px] font-black uppercase tracking-[0.2em] rounded-xl border-none cursor-pointer transition-all duration-500 bg-[#e6d5c3]/40 dark:bg-[#444547]/20 text-[#5c5f63]/50 dark:text-gray-600"
          >
            {{ 'ADMIN.PROJECTS.EXPLORE' | translate }} â†’
          </button>
        </div>
      }
    </div>
  }
</div>
